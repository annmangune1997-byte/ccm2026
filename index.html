<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Call Center Dashboard</title>
<style>
  body { font-family: Arial, sans-serif; margin: 20px; background: #f5f5f5; }
  h1 { text-align: center; }
  table { width: 100%; border-collapse: collapse; margin-bottom: 20px; }
  th, td { border: 1px solid #ccc; padding: 8px; text-align: center; }
  th { background-color: #007BFF; color: white; }
  .green { background-color: #c6f6c6; }
  .yellow { background-color: #fff3c6; }
  .red { background-color: #f6c6c6; }
  .dashboard { display: flex; justify-content: space-around; margin-bottom: 20px; }
  .card { background: white; padding: 15px; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); width: 18%; text-align: center; }
  .card h2 { margin: 10px 0; color: #007BFF; }
  input, select { padding: 5px; margin: 5px; }
  .form-container { margin-bottom: 20px; background: white; padding: 15px; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.1);}
</style>
</head>
<body>

<h1>Call Center & Orders Dashboard</h1>

<!-- Dashboard -->
<div class="dashboard">
  <div class="card">
    <h3>Total Orders</h3>
    <h2 id="totalOrders">0</h2>
  </div>
  <div class="card">
    <h3>Successful Orders</h3>
    <h2 id="successfulOrders">0</h2>
  </div>
  <div class="card">
    <h3>Cancelled Orders</h3>
    <h2 id="cancelledOrders">0</h2>
  </div>
  <div class="card">
    <h3>Success Rate</h3>
    <h2 id="successRate">0%</h2>
  </div>
</div>

<!-- Data Input Form -->
<div class="form-container">
  <h3>Add New Entry</h3>
  <label>Date: <input type="date" id="entryDate"></label>
  <label>Branch: 
    <select id="branchSelect">
      <option>Hamdan St</option>
      <option>Al Khalidiyah</option>
      <option>Shabiya 11</option>
      <option>Muroor</option>
      <option>Al Majaz</option>
      <option>Al Barsha</option>
      <option>Al Satwa</option>
      <option>Al Rigga</option>
    </select>
  </label>
  <label>Orders Received: <input type="number" id="ordersReceived"></label>
  <label>Successful Orders: <input type="number" id="successfulOrdersInput"></label>
  <label>Cancelled Orders: <input type="number" id="cancelledOrdersInput"></label>
  <label>Customer Calls: <input type="number" id="customerCalls"></label>
  <label>Complaints: <input type="number" id="complaints"></label>
  <button onclick="addRow()">Add Entry</button>
</div>

<!-- Filter -->
<div class="form-container">
  <h3>Filter Table</h3>
  <label>Filter by Branch:
    <select id="filterBranch" onchange="applyFilter()">
      <option value="">All</option>
      <option>Hamdan St</option>
      <option>Al Khalidiyah</option>
      <option>Shabiya 11</option>
      <option>Muroor</option>
      <option>Al Majaz</option>
      <option>Al Barsha</option>
      <option>Al Satwa</option>
      <option>Al Rigga</option>
    </select>
  </label>
  <label>Filter by Date: <input type="date" id="filterDate" onchange="applyFilter()"></label>
</div>

<!-- Orders Table -->
<table id="ordersTable">
  <thead>
    <tr>
      <th>Date</th>
      <th>Branch</th>
      <th>Orders Received</th>
      <th>Successful Orders</th>
      <th>Cancelled Orders</th>
      <th>Customer Calls</th>
      <th>Complaints</th>
      <th>Success Rate %</th>
    </tr>
  </thead>
  <tbody>
    <!-- Initial data can be inserted here -->
  </tbody>
</table>

<script>
let tableBody = document.getElementById('ordersTable').getElementsByTagName('tbody')[0];

function addRow() {
  const date = document.getElementById('entryDate').value;
  const branch = document.getElementById('branchSelect').value;
  const ordersReceived = parseInt(document.getElementById('ordersReceived').value) || 0;
  const successful = parseInt(document.getElementById('successfulOrdersInput').value) || 0;
  const cancelled = parseInt(document.getElementById('cancelledOrdersInput').value) || 0;
  const calls = parseInt(document.getElementById('customerCalls').value) || 0;
  const complaints = parseInt(document.getElementById('complaints').value) || 0;

  const newRow = tableBody.insertRow();
  [date, branch, ordersReceived, successful, cancelled, calls, complaints, ''].forEach((text, index) => {
    const cell = newRow.insertCell();
    cell.innerText = text;
  });
  updateTable();
}

function updateTable() {
  let totalOrders = 0, successfulOrders = 0, cancelledOrders = 0;

  for (let row of tableBody.rows) {
    const ordersReceived = parseInt(row.cells[2].innerText);
    const successful = parseInt(row.cells[3].innerText);
    const cancelled = parseInt(row.cells[4].innerText);

    totalOrders += ordersReceived;
    successfulOrders += successful;
    cancelledOrders += cancelled;

    const rate = ordersReceived > 0 ? Math.round((successful / ordersReceived) * 100) : 0;
    row.cells[7].innerText = rate + '%';
    row.cells[7].className = rate >= 90 ? 'green' : (rate >= 80 ? 'yellow' : 'red');
  }

  document.getElementById('totalOrders').innerText = totalOrders;
  document.getElementById('successfulOrders').innerText = successfulOrders;
  document.getElementById('cancelledOrders').innerText = cancelledOrders;
  const overallRate = totalOrders > 0 ? Math.round((successfulOrders / totalOrders) * 100) : 0;
  const rateElem = document.getElementById('successRate');
  rateElem.innerText = overallRate + '%';
  rateElem.className = overallRate >= 90 ? 'green' : (overallRate >= 80 ? 'yellow' : 'red');
}

function applyFilter() {
  const branchFilter = document.getElementById('filterBranch').value;
  const dateFilter = document.getElementById('filterDate').value;

  for (let row of tableBody.rows) {
    const branch = row.cells[1].innerText;
    const date = row.cells[0].innerText;
    row.style.display = 
      ((branchFilter === '' || branch === branchFilter) && 
       (dateFilter === '' || date === dateFilter)) ? '' : 'none';
  }
}

// Initialize dashboard if table has preloaded rows
updateTable();
</script>

</body>
</html>
